jQuery(function(t){var a=!1,e=!1;function i(i){i.preventDefault();var r,o="on";t(i.target).hasClass("dmach-loadmore")?r=t(i.target):(r=t(".divi-filter-archive-loop.main-loop").closest(".filtered-posts-cont"),o="off");var n=r.parent().find(".divi-filter-archive-loop"),l=n.attr("data-layoutid"),d=n.attr("data-posttype"),s=n.attr("data-noresults"),c=n.attr("data-sortorder"),p=n.attr("data-sortasc"),f=n.attr("data-gridstyle"),u=n.attr("data-columnscount"),m=n.attr("data-postnumber"),v=n.attr("data-btntext"),g=n.attr("data-btntext_loading"),h=n.attr("data-resultcount"),y=n.attr("data-countposition"),w=n.attr("data-shortcode_name"),x=parseInt(n.attr("data-current-page")),$=(parseInt(n.attr("data-max-page")),n.attr("data-filter-var")),k=n.find(".divi-loadmore").attr("data-icon"),b=n.attr("data-has-map"),C=n.attr("data-hide-marker-label"),j=n.attr("data-map-selector"),q=n.attr("data-map-marker-layout"),L=n.attr("data-map-all-posts"),_=n.attr("data-map-cluster"),P=n.attr("data-link_wholegrid"),S=n.attr("data-wholegrid-external"),z=n.attr("data-wholegrid-external_acf"),I=n.attr("data-result-count-single-text"),M=n.attr("data-result-count-all-text"),A=n.attr("data-result-count-pagination-text");if(n.attr("data-loop-var"))var D=JSON.stringify(JSON.parse(n.attr("data-loop-var")));var F={action:"divi_filter_loadmore_ajax_handler",security:loadmore_ajax_object.security,query:$,page:x,layoutid:l,posttype:d,noresults:s,sortorder:c,sortasc:p,gridstyle:f,columnscount:u,resultcount:h,countposition:y,shortcode_name:w,postnumber:m,loadmoretext:v,loadmore_icon:k,link_wholegrid:P,link_wholegrid_external:S,link_wholegrid_external_acf:z,is_loadmore:o,has_map:b,map_all_posts:L,map_selector:j,marker_layout:q,result_count_single_text:I,result_count_all_text:M,result_count_pagination_text:A,loop_var:D};n.attr("data-groupping-taxonomy")&&(F.groupping_taxonomy=n.attr("data-groupping-taxonomy"),F.last_grouping_term_id=n.find(".groupping-term-title").last().attr("data-term_id")),"none"==l&&(F.show_rating=n.attr("data-show_rating"),F.show_price=n.attr("data-show_price"),F.show_excerpt=n.attr("data-show_excerpt"),F.show_add_to_cart=n.attr("data-show_add_to_cart")),t.ajax({url:loadmore_ajax_object.ajax_url,data:F,type:"POST",beforeSend:function(t){if(n.closest(".filtered-posts-cont").addClass("infinite-loading"),"on"==o)r.text(g);else{var a=jQuery(".filtered-posts-cont").attr("data-ajaxload-anim");r.parent().append('<div class="loadmore-ajax-loading '+a+'"><div class="lines"><div class="line"></div><div class="line"></div><div class="line"></div></div><div class="spinner donut-cont"><div class="donut"></div></div><div class="spinner donutmulti-cont"><div class="donut multi"></div></div><div class="spinner ripple-cont"><div class="ripple"></div></div></div>')}n.closest(".filtered-posts-cont").find(".filtered-posts-loading").prepend('<div class="ajax-loading"><div class="lines"><div class="line"></div><div class="line"></div><div class="line"></div></div><div class="spinner donut-cont"><div class="donut"></div></div><div class="spinner donutmulti-cont"><div class="donut multi"></div></div><div class="spinner ripple-cont"><div class="ripple"></div></div></div>')},success:function(i){if(n.closest(".filtered-posts-cont").removeClass("infinite-loading"),a=!1,i){var o=t(i.posts);r.hasClass("dmach-loadmore")?r.text(v.replace(/\\/g,"")):(r.parent().find(".loading").remove(),r.parent().find(".loadmore-ajax-loading").remove()),r.parent().find(".loop-grid").length>0?r.parent().find(".loop-grid").eq(0).append(o):r.parent().find("ul.products").length>0&&r.parent().find("ul.products").eq(0).append(o),r.parent().find(".divi-filter-archive-loop").append(i.css_output),n.closest(".filtered-posts-cont").find(".filtered-posts-loading").find(".ajax-loading").remove();var l=r.parent();if(l.find(".divi-filter-result-count").length>0&&l.find(".divi-filter-result-count").remove(),i.bc_result_count&&r.parent().find(".woocommerce-result-count").length>0&&r.parent().find(".woocommerce-result-count").html(i.bc_result_count),r.hasClass("dmach-loadmore")&&r.remove(),i.after_post){var d=t("<textarea />").html(i.after_post).text();l.append(d.replace(/\\/g,""))}if(jQuery(".single_add_to_cart_button").addClass("ajax_add_to_cart"),"undefined"!=typeof ajax_disabled_products_class&&t("."+ajax_disabled_products_class+" .single_add_to_cart_button").removeClass("ajax_add_to_cart"),n.attr("data-current-page",x+1),"function"==typeof resizeAllGridItems){var s=o.find("img").length;o.find("img").one("load",function(){--s<=0&&resizeAllGridItems()}).each(function(){this.complete&&jQuery(this).trigger("load")})}if("function"==typeof get_post_popup&&get_post_popup(),n.find(".grid-col").find(".gallery_vars").length>0){var c=n.find(".grid-col").find(".gallery_vars").attr("data-gallery_vars"),p=n.find(".grid-col").find(".gallery_vars").attr("data-gallery_type");if(c=JSON.parse(c="{"+(c=(c=(c=c.replace(/,\s*$/,"")).replace(/,/g,", ")).replace(/'/g,'"'))+"}"),jQuery(".et_pb_de_mach_acf_slider_containter").each(function(t,a){jQuery(this).hasClass("slick-initialized")&&jQuery(this).slick("unslick"),jQuery(this).slick(c)}),"gallery"==p){var u=n.find(".grid-col").find(".gallery_vars").attr("data-gallery_nav");(u=JSON.parse(u="{"+(u=(u=(u=u.replace(/,\s*$/,"")).replace(/,/g,", ")).replace(/'/g,'"'))+"}")).asNavFor=".et_pb_de_mach_acf_slider_containter",u.focusOnSelect=!0,jQuery(".et_pb_de_mach_acf_slider_containter_nav").each(function(t,a){jQuery(this).hasClass("slick-initialized")&&jQuery(this).slick("unslick"),jQuery(this).slick(u)})}}if(i.map_data&&jQuery(j).length>0&&"off"==L&&jQuery(j).each(function(){jQuery(this);var t=jQuery(this).data("map");for(let a=0;a<markers.length;a++)markers[a].setMap(null);markers=[],"on"!=_?(jQuery.each(i.map_data,function(t,a){locations.push({lat:a.lat,lng:a.lng}),void 0!==C&&"on"==C?labels.push(a.title.charAt(0)):labels.push(""),i_windows.push(a.infoview)}),void 0!==t&&(markers=locations.map((a,e)=>{var i=new google.maps.Marker({position:a,label:labels[e],map:t}),r=new google.maps.InfoWindow({content:i_windows[e]});return google.maps.event.addListener(t,"click",function(){r.close()}),google.maps.event.addListener(i,"click",function(){r.open(t,i)}),i}))):(jQuery.each(i.map_data,function(t,a){locations.push({lat:a.lat,lng:a.lng}),void 0!==C&&"on"==C?labels.push(a.title.charAt(0)):labels.push(""),i_windows.push(a.infoview)}),void 0!==t&&(markers=locations.map((a,e)=>{var i=new google.maps.Marker({position:a,label:labels[e]}),r=new google.maps.InfoWindow({content:i_windows[e]});return google.maps.event.addListener(t,"click",function(){r.close()}),google.maps.event.addListener(i,"click",function(){r.open(t,i)}),i}),new MarkerClusterer(t,markers,{imagePath:clusterer_obj.imgPath})))}),"masonry"==f&&"function"==typeof resizeAllGridItems){var m=n.attr("data-masonry_ajax_buffer");resizeAllGridItems();var s=jQuery(".divi-filter-archive-loop.main-loop").children().eq(0).find("img").length;jQuery(".divi-filter-archive-loop.main-loop").children().eq(0).find("img").one("load",function(){0==--s&&resizeAllGridItems()}).each(function(){this.complete&&jQuery(this).trigger("load")}),setTimeout(function(){resizeAllGridItems()},m)}jQuery.fn.fitVids&&jQuery("#main-content").fitVids({customSelector:"iframe[src^='http://www.hulu.com'], iframe[src^='http://www.dailymotion.com'], iframe[src^='http://www.funnyordie.com'], iframe[src^='https://embed-ssl.ted.com'], iframe[src^='http://embed.revision3.com'], iframe[src^='https://flickr.com'], iframe[src^='http://blip.tv'], iframe[src^='http://www.collegehumor.com']"}),n.find(".et_post_gallery").length>0&&(n.find(".et_post_gallery").each(function(){jQuery(this).magnificPopup({delegate:".et_pb_gallery_image a",type:"image",removalDelay:500,gallery:{enabled:!0,navigateByImgClick:!0},mainClass:"mfp-fade",zoom:{enabled:window.et_pb_custom&&!window.et_pb_custom.is_builder_plugin_used,duration:500,opener:function(t){return t.find("img")}},autoFocusLast:!1})}),n.find(".et_post_gallery").find("a").off("click")),jQuery(".variations_form").each(function(){jQuery(this).wc_variation_form(),jQuery(this).trigger("check_variations")}),jQuery.event.trigger({type:"divi_filter_completed"}),""==i.posts&&(e=!0)}else r.hasClass("dmach-loadmore")&&r.remove()}})}t(document).on("click keydown",".dmach-loadmore",function(t){i(t)}),"infinite"==t(".divi-filter-archive-loop.main-loop").data("loadmore")&&t(window).scroll(function(r){var o=t(".divi-filter-archive-loop.main-loop"),n=o.offset();parseInt(o.attr("data-current-page"))<parseInt(o.attr("data-max-page"))&&t(window).scrollTop()>n.top+o.outerHeight(!0)-t(window).height()&&!a&&!e&&(a=!0,i(r))})});